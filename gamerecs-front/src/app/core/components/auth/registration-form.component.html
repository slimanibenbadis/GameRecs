<!-- Registration Form Container -->
<div class="flex-1 flex items-center justify-center p-4">
  <div class="w-full max-w-md bg-surface-0 dark:bg-surface-800 rounded-lg p-8 auth-form">
    <h2 class="text-3xl mb-8 text-center">Create Account</h2>
    
    <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="space-y-6">
      <!-- Username Field -->
      <div class="form-field">
        <label for="username" class="form-label">Username</label>
        <input 
          pInputText 
          id="username" 
          formControlName="username"
          class="w-full" 
          placeholder="Choose a username"
          [ngClass]="{'ng-invalid ng-dirty': registrationForm.get('username')?.invalid && registrationForm.get('username')?.touched}"
        />
        <small class="text-red-500" *ngIf="registrationForm.get('username')?.invalid && registrationForm.get('username')?.touched">
          {{ getErrorMessage('username') }}
        </small>
      </div>

      <!-- Email Field -->
      <div class="form-field">
        <label for="email" class="form-label">Email</label>
        <input 
          pInputText 
          id="email" 
          type="email" 
          formControlName="email"
          class="w-full"
          placeholder="Enter your email"
          [ngClass]="{'ng-invalid ng-dirty': registrationForm.get('email')?.invalid && registrationForm.get('email')?.touched}"
        />
        <small class="text-red-500" *ngIf="registrationForm.get('email')?.invalid && registrationForm.get('email')?.touched">
          {{ getErrorMessage('email') }}
        </small>
      </div>

      <!-- Password Field -->
      <div class="form-field">
        <label for="password" class="form-label">Password</label>
        <p-password 
          id="password" 
          formControlName="password"
          [toggleMask]="true"
          [feedback]="!environment.testing"
          styleClass="w-full"
          [inputStyle]="{'width': '100%'}"
          placeholder="Create a password"
          [ngClass]="{'ng-invalid ng-dirty': registrationForm.get('password')?.invalid && registrationForm.get('password')?.touched}"
        ></p-password>
        <small class="text-red-500" *ngIf="registrationForm.get('password')?.invalid && registrationForm.get('password')?.touched">
          {{ getErrorMessage('password') }}
        </small>
      </div>

      <!-- Confirm Password Field -->
      <div class="form-field">
        <label for="confirmPassword" class="form-label">Confirm Password</label>
        <p-password 
          id="confirmPassword" 
          formControlName="confirmPassword"
          [toggleMask]="true"
          [feedback]="false"
          styleClass="w-full"
          [inputStyle]="{'width': '100%'}"
          placeholder="Confirm your password"
          [ngClass]="{'ng-invalid ng-dirty': registrationForm.get('confirmPassword')?.invalid && registrationForm.get('confirmPassword')?.touched}"
        ></p-password>
        <small class="text-red-500" *ngIf="registrationForm.get('confirmPassword')?.invalid && registrationForm.get('confirmPassword')?.touched">
          {{ getErrorMessage('confirmPassword') }}
        </small>
      </div>

      <!-- Bio Field -->
      <div class="form-field">
        <label for="bio" class="form-label">Bio (Optional)</label>
        <textarea 
          pTextarea
          id="bio" 
          formControlName="bio"
          rows="3"
          class="w-full"
          placeholder="Tell us about yourself"
          [ngClass]="{'ng-invalid ng-dirty': registrationForm.get('bio')?.invalid && registrationForm.get('bio')?.touched}"
        ></textarea>
        <small class="text-red-500" *ngIf="registrationForm.get('bio')?.invalid && registrationForm.get('bio')?.touched">
          {{ getErrorMessage('bio') }}
        </small>
      </div>

      <!-- Profile Picture URL Field -->
      <div class="form-field">
        <label for="profilePicture" class="form-label">Profile Picture URL (Optional)</label>
        <input 
          pInputText 
          id="profilePicture" 
          formControlName="profilePictureUrl"
          class="w-full"
          placeholder="Enter image URL"
          [ngClass]="{'ng-invalid ng-dirty': registrationForm.get('profilePictureUrl')?.invalid && registrationForm.get('profilePictureUrl')?.touched}"
        />
        <small class="text-red-500" *ngIf="registrationForm.get('profilePictureUrl')?.invalid && registrationForm.get('profilePictureUrl')?.touched">
          {{ getErrorMessage('profilePictureUrl') }}
        </small>
      </div>

      <!-- Register Button -->
      <div class="mt-8">
        <p-button 
          type="submit"
          [label]="loading ? 'Creating Account...' : 'Create Account'"
          [disabled]="registrationForm.invalid || loading"
          styleClass="w-full"
          [loading]="loading"
        ></p-button>
      </div>

      <!-- Login Link -->
      <div class="mt-6 text-center">
        <span class="text-sm">Already have an account? </span>
        <a routerLink="/auth/login" class="text-sm hover:underline text-primary-color">Login</a>
      </div>
    </form>
  </div>
</div>

<!-- Toast Messages -->
<p-toast #toast
  position="top-center" 
  [baseZIndex]="9999"
  [showTransitionOptions]="'0ms'"
  [hideTransitionOptions]="'0ms'"
  styleClass="w-full max-w-md mx-auto"
></p-toast> 
