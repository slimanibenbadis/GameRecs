<div class="flex justify-center items-center min-h-screen bg-surface-0 dark:bg-surface-900">
  <div class="w-full max-w-lg p-6 bg-surface-0 dark:bg-surface-800 rounded-lg shadow-lg">
    <h2 class="text-2xl font-fira font-bold mb-6 text-center text-surface-900 dark:text-surface-0">Create Account</h2>
    
    <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="space-y-4">
      <div class="form-field">
        <label for="username" class="block text-sm font-rubik font-medium text-surface-700 dark:text-surface-200 mb-1">Username</label>
        <input 
          pInputText 
          id="username" 
          formControlName="username"
          class="w-full p-inputtext-sm" 
          [ngClass]="{'ng-invalid ng-dirty': registrationForm.get('username')?.invalid && registrationForm.get('username')?.touched}"
        />
        <small class="text-red-500" *ngIf="registrationForm.get('username')?.invalid && registrationForm.get('username')?.touched">
          {{ getErrorMessage('username') }}
        </small>
      </div>

      <div class="form-field">
        <label for="email" class="block text-sm font-rubik font-medium text-surface-700 dark:text-surface-200 mb-1">Email</label>
        <input 
          pInputText 
          id="email" 
          type="email" 
          formControlName="email"
          class="w-full p-inputtext-sm"
          [ngClass]="{'ng-invalid ng-dirty': registrationForm.get('email')?.invalid && registrationForm.get('email')?.touched}"
        />
        <small class="text-red-500" *ngIf="registrationForm.get('email')?.invalid && registrationForm.get('email')?.touched">
          {{ getErrorMessage('email') }}
        </small>
      </div>

      <div class="form-field">
        <label for="password" class="block text-sm font-rubik font-medium text-surface-700 dark:text-surface-200 mb-1">Password</label>
        <p-password 
          id="password" 
          formControlName="password"
          [toggleMask]="true"
          [feedback]="!environment.testing"
          styleClass="w-full"
          [inputStyle]="{'width': '100%'}"
          [ngClass]="{'ng-invalid ng-dirty': registrationForm.get('password')?.invalid && registrationForm.get('password')?.touched}"
        ></p-password>
        <small class="text-red-500" *ngIf="registrationForm.get('password')?.invalid && registrationForm.get('password')?.touched">
          {{ getErrorMessage('password') }}
        </small>
      </div>

      <div class="form-field">
        <label for="confirmPassword" class="block text-sm font-rubik font-medium text-surface-700 dark:text-surface-200 mb-1">Confirm Password</label>
        <p-password 
          id="confirmPassword" 
          formControlName="confirmPassword"
          [toggleMask]="true"
          [feedback]="false"
          styleClass="w-full"
          [inputStyle]="{'width': '100%'}"
          [ngClass]="{'ng-invalid ng-dirty': registrationForm.get('confirmPassword')?.invalid && registrationForm.get('confirmPassword')?.touched}"
        ></p-password>
        <small class="text-red-500" *ngIf="registrationForm.hasError('mismatch') && registrationForm.get('confirmPassword')?.touched">
          Passwords do not match
        </small>
      </div>

      <div class="form-field">
        <label for="bio" class="block text-sm font-rubik font-medium text-surface-700 dark:text-surface-200 mb-1">Bio (Optional)</label>
        <textarea 
          pTextarea
          id="bio" 
          formControlName="bio"
          rows="3"
          class="w-full"
          [ngClass]="{'ng-invalid ng-dirty': registrationForm.get('bio')?.invalid && registrationForm.get('bio')?.touched}"
        ></textarea>
        <small class="text-red-500" *ngIf="registrationForm.get('bio')?.invalid && registrationForm.get('bio')?.touched">
          {{ getErrorMessage('bio') }}
        </small>
      </div>

      <div class="form-field">
        <label for="profilePicture" class="block text-sm font-rubik font-medium text-surface-700 dark:text-surface-200 mb-1">Profile Picture URL (Optional)</label>
        <input 
          pInputText 
          id="profilePicture" 
          formControlName="profilePictureUrl"
          class="w-full p-inputtext-sm"
          [ngClass]="{'ng-invalid ng-dirty': registrationForm.get('profilePictureUrl')?.invalid && registrationForm.get('profilePictureUrl')?.touched}"
        />
        <small class="text-red-500" *ngIf="registrationForm.get('profilePictureUrl')?.invalid && registrationForm.get('profilePictureUrl')?.touched">
          {{ getErrorMessage('profilePictureUrl') }}
        </small>
      </div>

      <div class="mt-6">
        <p-button 
          type="submit"
          [label]="loading ? 'Creating Account...' : 'Create Account'"
          [disabled]="registrationForm.invalid || loading"
          styleClass="w-full"
          [loading]="loading"
        ></p-button>
      </div>
    </form>
  </div>
</div>

<p-toast #toast
  position="top-center" 
  [baseZIndex]="9999"
  [preventDuplicates]="true"
  [showTransitionOptions]="'0ms'"
  [hideTransitionOptions]="'0ms'"
  styleClass="w-full"
></p-toast> 
